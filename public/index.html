<!DOCTYPE HTML>
<html>
    <head>
        <title></title>

        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
        <script type="text/javascript" src="js/jquery-1.12.4.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/interact.min.js"></script>
        <link  rel="stylesheet" href="css/style.css" />
        <script type="text/javascript" src="js/app.js"></script>
    </head>
    <body>
        
        <h1 class="text-center">Welcome to Goalie!</h1>

        <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "150px";
            document.getElementById("mySidenav2").style.width = "120px";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";  
        }
            
        </script>
        
        
        <div id="mySidenav" class="sidenav" onmouseover="openNav()" onmouseout="closeNav()">
   
            <img src="img/testImage.png" class="tileImage" >
            <br>
            <br>
            <img src="img/testImage.png" class="tileImage">
            <br>
            <br>
            <img src="img/testImage.png" class="tileImage">


        </div>
        
        <div id="mySidenav2" class="sidenav2" onmouseover="openNav()" onmouseout="closeNav()">

            <img src="img/testImage.png" class="tileImage" >
            <br>
            <br>
            <img src="img/testImage.png" class="tileImage">
            <br>
            <br>
            <img src="img/testImage.png" class="tileImage">


        </div>
        
        
        
        
        
        
        <!--<div id="drag-1" class="draggable">
            <img src="img/testImage.png" class="tileImage">
            
            <button type="button" class="playButton">Play</button>
            <input type="text" class="textInput">
            
        </div>
        
        <div id="drag-2" class="draggable">
            <img src="img/testImage.png" class="tileImage">
            
            <button type="button" class="playButton">Play</button>
            <input type="text" class="textInput">
            
        </div>-->
        
        <script>
            console.log(document.getElementsByClassName("playButton"))

            var playbuttons = document.getElementsByClassName("playButton");
            for (var i = 0; i < playbuttons.length; i++)
            {
                playbuttons[i].onclick = function() {
                    var text = this.parentElement.getElementsByClassName("textInput")[0].value;
                    var speech = new SpeechSynthesisUtterance(text);
                    window.speechSynthesis.speak(speech);
                }
            }
                
            
            interact('.draggable')
                .draggable({
                    inertia: false,
                    restrict: {
                        restriction: "parent",
                        endOnly: true,
                        elementRect: { top: 0, left: 0, bottom: 1, right: 1 }
                    },
                    autoScroll: true,
                    onmove: dragMoveListener,
                    onend: function (event) {
                        console.log(event.target.querySelector('input'))

                    }
                    });

                    function dragMoveListener (event) {
                        var target = event.target,
                        // keep the dragged position in the data-x/data-y attributes
                            x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
                            y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
                        target.style.webkitTransform = target.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
                        target.setAttribute('data-x', x);
                        target.setAttribute('data-y', y);
                        target.getAttribute('data-x'), target.getAttribute('data-x')
                    }

            window.dragMoveListener = dragMoveListener;
            
            function createTile()
            {
                var tile = document.createElement("div");
                tile.style.width = "200px";
                tile.style.height = "400px";
                tile.style.background = "blue";
                tile.className = "draggable";
                tile.innerHTML = '<img src="img/testImage.png" class="tileImage">' +
                '<button type="button" class="playButton">Play</button>' + 
                '<input type="text" class="textInput">'
                document.body.appendChild(tile);
            }
            
            function saveTiles() {
                var tiles = document.getElementsByClassName("draggable");
                var tilesToSave = [];
                for (var i = 0; i < tiles.length; i++)
                {
                    var aTile =
                    {
                        x: tiles[i].getAttribute('data-x'),
                        y: tiles[i].getAttribute('data-y'),
                        text: tiles[i].getElementsByClassName('textInput')[0].value,//This last one is a 0
                        img: tiles[i].getElementsByClassName('tileImage')[0].getAttribute('src'),
                        color: tiles[i].style.background
                    }
                    tilesToSave.push(aTile);
                }
                console.log(tilesToSave);
            }
            
        </script>
           
    </body>
</html>